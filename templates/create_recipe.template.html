{% extends 'base.template.html' %}

{%block content %}
<form method="POST">
    <br>
    <div>
        <label class="form-label"><h5>Recipe Name</h5></label>
        <input type="text" class="form-control" name="recipe_name"/>
    </div>
    <br>
    <div class="form-group">
        <label for="descriptiontextarea"><h5>Description</h5></label>
        <textarea class="form-control" id="descriptiontextarea" name="description" rows="3"></textarea>
    </div>
    <div>
        <label class="form-label"><h5>Servings</h5></label>
        <input type="number" class="form-control" name="servings"/>
    </div>
    <br>
    <div class="form-group">
        <label for="ingredientstextarea"><h5>Ingredients</h5></label>
        <h6>Please put a ';' after each ingredient and its measurement. e.g. 1 tbsp of salt, 1 tsp soy sauce</h6>
        <textarea class="form-control" id="ingredientstextarea" name="ingredients" rows="5"></textarea>
    </div>

    <div class="form-group">
        <label for="directionstextarea"><h5>Directions</h5></label>
        <h6>Please put a ';' after each step</h6>
        <textarea class="form-control" id="directionstextarea" name="directions" rows="5"></textarea>
    </div>

    <h5>Cuisine</h5>
    <p>Please press SHIFT key to select multiple options</p>
    <select name="cuisine" id="cuisine" multiple>
      <option value="chinese">Chinese</option>
      <option value="western">Western</option>
      <option value="hainanese">Hainanese</option>
    </select>
    <br> 
    <br>
    <h5>Meal Type</h5>
    <select id="meal_type" name="meal_type">
        <option value="breakfast">Breakfast</option> 
        <option value="maincourse">Main Course</option> 
        <option value="soup">Soup</option> 
        <option value="dessert">Dessert</option> 
        <option value="festive">Festive</option> 
    </select>
    <br>
    <br>
    <div>
        <label class="form-label"><h5>Video URL</h5></label>
        <input type="text" class="form-control" name="media"/>
    </div>
    <br>
    <br>
    <div>
        <label class="form-label"><h5>Image</h5></label>
        <p>For best display, image should be of 560 width and 315 height.</p>
        <input type="hidden" id="image_url" name="image"/>

        <button id="upload_widget" class="cloudinary-button">Upload files</button>

        <script src="https://widget.cloudinary.com/v2.0/global/all.js" type="text/javascript"></script>  
    
        <script type="text/javascript">  
            var myWidget = cloudinary.createUploadWidget({
            cloudName: "{{cloudName}}", 
            uploadPreset: "{{uploadPreset}}"}, (error, result) => { 
                if (!error && result && result.event === "success") { 
                console.log('Done! Here is the image info: ', result.info); 
                console.log('URL', result.info.url);
                
                var imageURL = document.querySelector('#image_url');
                imageURL.value = result.info.url;

                }
            }
            )
    
            document.getElementById("upload_widget").addEventListener("click", function(){
                myWidget.open();
            }, false);
        </script>
    </div>

    <br>
    <div>
        <h5>Contributor Info</h5>
        <label class="form-label">Contributor Name</label>
        <input type="text" class="form-control" name="contributor"/>
    </div>
    <div>
        <label class="form-label">Contributor Email </label>
        <input type="text" class="form-control" name="email"/>
    </div>
    <p>This information will not be displayed with the recipe.</p>
    <br>
    <input type="submit" class="btn btn-primary"/>
</form>

{%endblock%}

{% block javascript %}

{% endblock %}
